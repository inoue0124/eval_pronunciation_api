{
  "builders": [
      {
          "type": "amazon-ebs",
          "region": "{{user `region`}}",
          "source_ami_filter": {
              "filters": {
                  "name": "{{user `source_ami_name`}}*"
              },
              "owners": ["137112412989"],
              "most_recent": true
          },
          "instance_type": "{{user `instance_type`}}",
          "ssh_username": "{{user `ssh_username`}}",
          "ami_name": "{{user `ami_name`}}_{{timestamp}}",
          "tags": {
              "Name": "{{user `ami_name`}}_{{timestamp}}",
              "Base_AMI_ID": "{{ .SourceAMI }}",
              "Base_AMI_NAME": "{{ .SourceAMIName }}"
          }
      }
  ],
  "provisioners": [
      {
          "type": "shell",
          "inline": [
              "sudo yum -y update"
          ]
      },
      {
          "type": "ansible",
          "playbook_file": "../ansible/playbook.yml"
      }
  ]
}